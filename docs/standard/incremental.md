---
title: 增量写入
---

增量写入的时机分为两种：

1. 一个墨迹结束绘制时（抬笔时）

此时可以增量写入，但如果用户撤回一些墨迹后再书写，则应该重新写入完整文件。

2. 一个画布结束绘制时

如果是单画布情况时，则应该结束文件而不是增量写入。

::: tip 提示
你可能在 ppt 翻页后需要对前一页的画布增量写入（一个画布结束绘制时）。需要注意的是，如果是用户修改了之前的页画布（就是翻回来修改），则应该重新写入完整文件。
:::

---

::: tip 提示
在产生了墨迹点而当前墨迹尚未绘制完全时不应增量写入。
:::

但建议在画布文件结束保存的时候完整地重新写入整个文件，因为增量写入只是防止程序过程中崩溃而导致的墨迹无法恢复。  

所以核心事项是在无法保证增量写入的最终结果是正确时（例如用户进行了撤回操作或是 PPT 页数又翻回来了），则应该完整地重新写入整个文件。  
